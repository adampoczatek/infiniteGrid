!function(){"use strict";angular.module("infiniteGrid",["infiniteGrid.Templates"])}(),function(){"use strict";var a;a=function(a,b){return{setup:function(a,c){return b.setupDataSetObj(a,c)},getEmptyCells:function(a){var c=[];return b.loopObj(a,function(a,d){b.loopObj(a.columns,function(a,b){var e;a.value||(e={},e[d]=parseFloat(b),c.push(e))})}),c},queryLocalData:function(a,c,d,e,f){var g,h,i,j,k,l,m,n;for(g={cached:{},empty:[]},h=0;e>h;h++)for(j=h+c,i=f[j],g.cached[h]=b.createRowObj(),k=0;d>k;k++)m=k+a,l=i&&i.columns&&i.columns[m],l&&l.value||(l=b.createColumnObj(),n={},n[j]=m,g.empty.push(n)),g.cached[h].columns[k]=l;return g},mergeData:function(a,c){var d,e;return b.loopObj(c,function(c,f){d=a[f],d||(d=a[f]=b.createRowObj()),b.loopObj(c,function(a,c){e=d.columns[c],e||(e=d.columns[c]=b.createColumnObj()),e.value=a.value})}),a}}},angular.module("infiniteGrid").service("dataFactory",["$http","utilsFactory","CellModel",a])}(),function(){"use strict";var a;a=function(a){var b,c,d;return d=function(a){return JSON.parse(JSON.stringify(a))},b=function(a,b){var c,d,e;for(e={},c=0,d=a;d>c;c++)e[c]=b;return e},c=function(a,b){var c,e,f;for(c={},e=0,f=a;f>e;e++)c[e]={columns:d(b)};return c},{createRowObj:function(){return{columns:{}}},createColumnObj:function(){return new a},setupDataSetObj:function(a,d){var e,f;return e=b(a,{value:null}),f=c(d,e)},cloneObject:function(a){return d(a)},loopObj:function(a,b){var c;for(c in a)a.hasOwnProperty(c)&&b.call(a,a[c],c)}}},angular.module("infiniteGrid").service("utilsFactory",["CellModel",a])}(),function(){"use strict";var a;a=function(a,b,c){var d;return d=function(a,b){this.data={},this.rowsCount=a,this.columnsCount=b},d.prototype.insertData=function(b){var d;return d=this,c.loopObj(b,function(b,c){var e,f;f=parseFloat(c),e=d.data[f],e instanceof a||(e=d.data[f]=new a),e.insertCells(b)}),this},d.prototype.query=function(c,d){var e,f,g,h,i,j,k,l,m,n;for(m=this.rowsCount,n=this.columnsCount,e={data:{},empty:[]},f=0;m>f;f++)for(h=f+d,g=this.data[h],e.data[f]=new a,i=0;n>i;i++)j=null,k=i+c,g instanceof a&&(j=g.getCell(k)),j||(j=new b,l={},l[k]=h,e.empty.push(l)),e.data[f].insertCell(i,j);return e},d},angular.module("infiniteGrid").service("CacheModel",["RowModel","CellModel","utilsFactory",a])}(),function(){"use strict";var a;a=function(){var a;return a=function(a,b,c){this.value=a,this.frozen=!1,this.template=c,"boolean"==typeof b&&(this.frozen=b)},a.prototype.hasValue=function(){return"number"==typeof this.value?!0:!!this.value},a.prototype.setValue=function(a){return this.value=a,this},a.prototype.getValue=function(){return this.value},a.prototype.freeze=function(a){if("boolean"==typeof a)return this.frozen=a,this.frozen;throw new Error("`freeze` parameter must be a boolean.")},a.prototype.isFrozen=function(){return"boolean"==typeof this.frozen?this.frozen:!1},a.prototype.render=function(){return this.getValue()},a},angular.module("infiniteGrid").service("CellModel",[a])}(),function(){"use strict";var a;a=function(a,b){var c;return c=function(a){this.cells={},this.frozen=!1,"boolean"==typeof a&&(this.frozen=a)},c.prototype.insertCell=function(b,c){if("number"!=typeof b||b!==b)throw new Error("`cellIndex` parameter isn't a number.");if(!(c instanceof a))throw new Error("`cellInstance` parameter isn't an instance of Cell class.");return this.cells[b]=c,this},c.prototype.insertCells=function(c){var d;return d=this,b.loopObj(c,function(b,c){var e,f;e=new a(b),f=parseFloat(c),d.insertCell(f,e)}),this},c.prototype.removeCell=function(a){if("number"!=typeof a||a!==a)throw new Error("`cellIndex` is not a number");return this.cells[a]=null,this},c.prototype.getCell=function(a){if("number"!=typeof a||a!==a)throw new Error("`cellIndex` is not a number.");return this.cells[a]},c.prototype.freeze=function(a){if("boolean"==typeof a)return this.frozen=a,this.frozen;throw new Error("`freeze` parameter must be a boolean.")},c},angular.module("infiniteGrid").service("RowModel",["CellModel","utilsFactory",a])}(),function(){"use strict";var a;a=function(){var a;return a=function(){this.data={}},a.prototype.update=function(a){this.data=a},a},angular.module("infiniteGrid").service("ViewModel",[a])}(),function(){"use strict";var a;a=function(a,b,c,d,e,f){var g;return g=function(b){var c,d,g,h;c=new e(b.columns,b.rows),d=new f,h=function(a,b,c,d){return!a||!b||!c||!d||a>b||c>d?!1:!0},b.initialise=function(){var a;a=h(b.columns,b.totalColumns,b.rows,b.totalRows),a&&(b.initialised=!0,b.getData(0,0))},b.updateView=function(a){b.data=a},b.getData=function(d,e){var f;g={columnIndex:d,rowIndex:e},f=c.query(d,e),b.updateView(f.data),f.empty.length&&(window.console.log("`scope.getData`: Querying empty cells.",f.empty),a.get("/fake-data/data-simple.json").success(function(a){c.insertData(a),b.getData(d,e)}))},b.showNextRow=function(){b.getData(g.columnIndex,g.rowIndex+1,b.totalColumns)},b.showPrevRow=function(){b.getData(g.columnIndex,g.rowIndex-1,b.totalColumns)},b.showNextColumn=function(){b.getData(g.columnIndex+1,g.rowIndex)},b.showPrevColumn=function(){b.getData(g.columnIndex-1,g.rowIndex)},b.$watchCollection("[totalColumns, totalRows]",function(a,c){a!==c&&b.initialise()}),b.initialise()},{link:g,restrict:"AE",scope:{columns:"=",totalColumns:"=",rows:"=",totalRows:"="},template:b.get("templates/grid.tpl.html")}},angular.module("infiniteGrid").directive("infiniteGrid",["$http","$templateCache","utilsFactory","dataFactory","CacheModel","ViewModel",a])}(),function(){"use strict";angular.module("infiniteGrid.Templates",[]).run(["$templateCache",function(a){a.put("templates/grid.tpl.html",'<ul class="infinite-grid">\n    <li class="infinite-grid__row"\n        ng-class="{ \'infinite-grid__row--freeze\': row.isFrozen() }"\n        ng-repeat="row in data">\n\n        <div class="infinite-grid__column"\n             ng-class="{ \'infinite-grid__column--freeze\': cell.isFrozen() }"\n             ng-repeat="cell in row.cells">\n\n            {{cell.render()}}\n        </div>\n    </li>\n</ul>\n\n<button ng-click="showPrevRow();">Show prev row</button>\n<button ng-click="showNextRow();">Show next row</button>\n<button ng-click="showPrevColumn();">Show prev column</button>\n<button ng-click="showNextColumn();">Show next column</button>')}])}();